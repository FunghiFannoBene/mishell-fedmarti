{
    "sourceFile": "transform_dollar.c",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1700832225753,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1700832418504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n /*                                                    +:+ +:+         +:+     */\n /*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n /*                                                +#+#+#+#+#+   +#+           */\n /*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n-/*   Updated: 2023/11/24 14:23:45 by shhuang          ###   ########.fr       */\n+/*   Updated: 2023/11/24 14:26:58 by shhuang          ###   ########.fr       */\n /*                                                                            */\n /******************************************************************************/\n \n #include \"short_code.h\"\n@@ -37,9 +37,9 @@\n \t\t}\n \t}\n \telse\n \t\td->slash_count = 0;\n-\tif (s[d->i] == '\\'')\n+\tif (s[d->i] == '\\'' && d->flag = 0)\n \t\td->flag = 1;\n \twhile (s[d->i] && d->flag == 1)\n \t{\n \t\td->i++;\n"
                },
                {
                    "date": 1700832427692,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n /*                                                    +:+ +:+         +:+     */\n /*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n /*                                                +#+#+#+#+#+   +#+           */\n /*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n-/*   Updated: 2023/11/24 14:26:58 by shhuang          ###   ########.fr       */\n+/*   Updated: 2023/11/24 14:27:07 by shhuang          ###   ########.fr       */\n /*                                                                            */\n /******************************************************************************/\n \n #include \"short_code.h\"\n@@ -37,9 +37,9 @@\n \t\t}\n \t}\n \telse\n \t\td->slash_count = 0;\n-\tif (s[d->i] == '\\'' && d->flag = 0)\n+\tif (s[d->i] == '\\'' && d->flag == 0)\n \t\td->flag = 1;\n \twhile (s[d->i] && d->flag == 1)\n \t{\n \t\td->i++;\n"
                },
                {
                    "date": 1700832491856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,95 @@\n+/******************************************************************************/\n+/*                                                                            */\n+/*                                                        :::      ::::::::   */\n+/*   transform_dollar.c                                 :+:      :+:    :+:   */\n+/*                                                    +:+ +:+         +:+     */\n+/*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n+/*                                                +#+#+#+#+#+   +#+           */\n+/*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n+/*   Updated: 2023/11/24 14:28:11 by shhuang          ###   ########.fr       */\n+/*                                                                            */\n+/******************************************************************************/\n+\n+#include \"short_code.h\"\n+\n+void\tinit_transform_d(t_short_dollar *d)\n+{\n+\td->tmp = NULL;\n+\td->i = -1;\n+\td->env_len = 0;\n+\td->save = 0;\n+\td->save_pre = 0;\n+\td->size = 0;\n+\td->slash_count = 0;\n+\td->start = 0;\n+\td->flag = 0;\n+}\n+\n+int\tcreate_flags(char *s, t_short_dollar *d)\n+{\n+\td->tmp = NULL;\n+\tif (s[d->i] == '\\\\')\n+\t{\n+\t\twhile (s[d->i] == '\\\\')\n+\t\t{\n+\t\t\td->slash_count++;\n+\t\t\td->i++;\n+\t\t}\n+\t}\n+\telse\n+\t\td->slash_count = 0;\n+\tif (s[d->i] == '\\'' && d->flag == 0)\n+\t\td->flag = 1;\n+\twhile (s[d->i] && d->flag == 1)\n+\t{\n+\t\td->i++;\n+\t\tif (s[d->i] == '\\'')\n+\t\t{\n+\t\t\td->flag = 0;\n+\t\t\tbreak;\n+\t\t}\n+\t}\n+\td->start = d->i;\n+\treturn (1);\n+}\n+\n+void remove_spaces(char *str) \n+{\n+    int length = ft_strlen(str);\n+    \n+    while (length > 0 && str[length - 1] == ' ')\n+        length--;\n+\n+    str[length] = '\\0';\n+}\n+\n+char\t*transform_for_dollar(char *s, t_data *data)\n+{\n+\tt_var\t\t\t*list;\n+\tt_short_dollar\td;\n+\n+\tinit_transform_d(&d);\n+\twhile (s[++d.i] != '\\0')\n+\t{\n+\t\td.size = 0;\n+\t\tif (create_flags(s, &d) && s[d.i] == '\\0')\n+\t\t\treturn (s);\n+\t\td.env_len = checksymbol(s + d.i + 1);\n+\t\tif (s[d.i] == '$' && d.slash_count % 2 == 0 && d.env_len)\n+\t\t{\n+\t\t\td.save = s[d.i + d.env_len + 1];\n+\t\t\ts[d.i + d.env_len + 1] = '\\0';\n+\t\t\tlist = search_variable_tvar(s + d.i, data);\n+\t\t\ts[d.i + d.env_len + 1] = (char)d.save;\n+\t\t\tif (list != NULL)\n+\t\t\t{\n+\t\t\t\td.tmp = add_slashes(ft_strdup(list->value));\n+\t\t\t\td.size = (int)ft_strlen(d.tmp);\n+\t\t\t}\n+\t\t\ts = replace_for_new_str(s, d.tmp, d.start, &d.i);\n+\t\t\td.i+=d.size;\n+\t\t}\n+\t}\n+\tremove_spaces(s);\n+\treturn (s);\n+}\n"
                },
                {
                    "date": 1700835533323,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n /*                                                    +:+ +:+         +:+     */\n /*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n /*                                                +#+#+#+#+#+   +#+           */\n /*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n-/*   Updated: 2023/11/24 14:28:11 by shhuang          ###   ########.fr       */\n+/*   Updated: 2023/11/24 15:18:53 by shhuang          ###   ########.fr       */\n /*                                                                            */\n /******************************************************************************/\n \n #include \"short_code.h\"\n@@ -37,8 +37,13 @@\n \t\t}\n \t}\n \telse\n \t\td->slash_count = 0;\n+\t\tif(d->flag == 2 && s[d->i] == '\"')\n+\t\t\td->flag = 0;\n+\t\telse\n+\t\t\tif (s[d->i] == '\"')\n+\t\t\t\td->flag == 2;\n \tif (s[d->i] == '\\'' && d->flag == 0)\n \t\td->flag = 1;\n \twhile (s[d->i] && d->flag == 1)\n \t{\n@@ -92,96 +97,4 @@\n \t}\n \tremove_spaces(s);\n \treturn (s);\n }\n-/******************************************************************************/\n-/*                                                                            */\n-/*                                                        :::      ::::::::   */\n-/*   transform_dollar.c                                 :+:      :+:    :+:   */\n-/*                                                    +:+ +:+         +:+     */\n-/*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n-/*                                                +#+#+#+#+#+   +#+           */\n-/*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n-/*   Updated: 2023/11/24 14:27:07 by shhuang          ###   ########.fr       */\n-/*                                                                            */\n-/******************************************************************************/\n-\n-#include \"short_code.h\"\n-\n-void\tinit_transform_d(t_short_dollar *d)\n-{\n-\td->tmp = NULL;\n-\td->i = -1;\n-\td->env_len = 0;\n-\td->save = 0;\n-\td->save_pre = 0;\n-\td->size = 0;\n-\td->slash_count = 0;\n-\td->start = 0;\n-\td->flag = 0;\n-}\n-\n-int\tcreate_flags(char *s, t_short_dollar *d)\n-{\n-\td->tmp = NULL;\n-\tif (s[d->i] == '\\\\')\n-\t{\n-\t\twhile (s[d->i] == '\\\\')\n-\t\t{\n-\t\t\td->slash_count++;\n-\t\t\td->i++;\n-\t\t}\n-\t}\n-\telse\n-\t\td->slash_count = 0;\n-\tif (s[d->i] == '\\'' && d->flag == 0)\n-\t\td->flag = 1;\n-\twhile (s[d->i] && d->flag == 1)\n-\t{\n-\t\td->i++;\n-\t\tif (s[d->i] == '\\'')\n-\t\t\td->flag = 0;\n-\t}\n-\td->start = d->i;\n-\treturn (1);\n-}\n-\n-void remove_spaces(char *str) \n-{\n-    int length = ft_strlen(str);\n-    \n-    while (length > 0 && str[length - 1] == ' ')\n-        length--;\n-\n-    str[length] = '\\0';\n-}\n-\n-char\t*transform_for_dollar(char *s, t_data *data)\n-{\n-\tt_var\t\t\t*list;\n-\tt_short_dollar\td;\n-\n-\tinit_transform_d(&d);\n-\twhile (s[++d.i] != '\\0')\n-\t{\n-\t\td.size = 0;\n-\t\tif (create_flags(s, &d) && s[d.i] == '\\0')\n-\t\t\treturn (s);\n-\t\td.env_len = checksymbol(s + d.i + 1);\n-\t\tif (s[d.i] == '$' && d.slash_count % 2 == 0 && d.env_len)\n-\t\t{\n-\t\t\td.save = s[d.i + d.env_len + 1];\n-\t\t\ts[d.i + d.env_len + 1] = '\\0';\n-\t\t\tlist = search_variable_tvar(s + d.i, data);\n-\t\t\ts[d.i + d.env_len + 1] = (char)d.save;\n-\t\t\tif (list != NULL)\n-\t\t\t{\n-\t\t\t\td.tmp = add_slashes(ft_strdup(list->value));\n-\t\t\t\td.size = (int)ft_strlen(d.tmp);\n-\t\t\t}\n-\t\t\ts = replace_for_new_str(s, d.tmp, d.start, &d.i);\n-\t\t\td.i+=d.size;\n-\t\t}\n-\t}\n-\tremove_spaces(s);\n-\treturn (s);\n-}\n"
                },
                {
                    "date": 1700835593354,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,101 @@\n+/******************************************************************************/\n+/*                                                                            */\n+/*                                                        :::      ::::::::   */\n+/*   transform_dollar.c                                 :+:      :+:    :+:   */\n+/*                                                    +:+ +:+         +:+     */\n+/*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n+/*                                                +#+#+#+#+#+   +#+           */\n+/*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n+/*   Updated: 2023/11/24 15:19:53 by shhuang          ###   ########.fr       */\n+/*                                                                            */\n+/******************************************************************************/\n+\n+#include \"short_code.h\"\n+\n+void\tinit_transform_d(t_short_dollar *d)\n+{\n+\td->tmp = NULL;\n+\td->i = -1;\n+\td->env_len = 0;\n+\td->save = 0;\n+\td->save_pre = 0;\n+\td->size = 0;\n+\td->slash_count = 0;\n+\td->start = 0;\n+\td->flag = 0;\n+}\n+\n+int\tcreate_flags(char *s, t_short_dollar *d)\n+{\n+\td->tmp = NULL;\n+\tif (s[d->i] == '\\\\')\n+\t{\n+\t\twhile (s[d->i] == '\\\\')\n+\t\t{\n+\t\t\td->slash_count++;\n+\t\t\td->i++;\n+\t\t}\n+\t}\n+\telse\n+\t{\n+\t\td->slash_count = 0;\n+\t}\n+\tif(d->flag == 2 && s[d->i] == '\"')\n+\t\td->flag = 0;\n+\telse if (s[d->i] == '\"')\n+\t\t\td->flag == 2;\n+\tif (s[d->i] == '\\'' && d->flag == 0)\n+\t\td->flag = 1;\n+\twhile (s[d->i] && d->flag == 1)\n+\t{\n+\t\td->i++;\n+\t\tif (s[d->i] == '\\'')\n+\t\t{\n+\t\t\td->flag = 0;\n+\t\t\tbreak;\n+\t\t}\n+\t}\n+\td->start = d->i;\n+\treturn (1);\n+}\n+\n+void remove_spaces(char *str) \n+{\n+    int length = ft_strlen(str);\n+    \n+    while (length > 0 && str[length - 1] == ' ')\n+        length--;\n+\n+    str[length] = '\\0';\n+}\n+\n+char\t*transform_for_dollar(char *s, t_data *data)\n+{\n+\tt_var\t\t\t*list;\n+\tt_short_dollar\td;\n+\n+\tinit_transform_d(&d);\n+\twhile (s[++d.i] != '\\0')\n+\t{\n+\t\td.size = 0;\n+\t\tif (create_flags(s, &d) && s[d.i] == '\\0')\n+\t\t\treturn (s);\n+\t\td.env_len = checksymbol(s + d.i + 1);\n+\t\tif (s[d.i] == '$' && d.slash_count % 2 == 0 && d.env_len)\n+\t\t{\n+\t\t\td.save = s[d.i + d.env_len + 1];\n+\t\t\ts[d.i + d.env_len + 1] = '\\0';\n+\t\t\tlist = search_variable_tvar(s + d.i, data);\n+\t\t\ts[d.i + d.env_len + 1] = (char)d.save;\n+\t\t\tif (list != NULL)\n+\t\t\t{\n+\t\t\t\td.tmp = add_slashes(ft_strdup(list->value));\n+\t\t\t\td.size = (int)ft_strlen(d.tmp);\n+\t\t\t}\n+\t\t\ts = replace_for_new_str(s, d.tmp, d.start, &d.i);\n+\t\t\td.i+=d.size;\n+\t\t}\n+\t}\n+\tremove_spaces(s);\n+\treturn (s);\n+}\n"
                },
                {
                    "date": 1700835628322,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n /*                                                    +:+ +:+         +:+     */\n /*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n /*                                                +#+#+#+#+#+   +#+           */\n /*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n-/*   Updated: 2023/11/24 15:19:53 by shhuang          ###   ########.fr       */\n+/*   Updated: 2023/11/24 15:20:28 by shhuang          ###   ########.fr       */\n /*                                                                            */\n /******************************************************************************/\n \n #include \"short_code.h\"\n@@ -42,9 +42,9 @@\n \t}\n \tif(d->flag == 2 && s[d->i] == '\"')\n \t\td->flag = 0;\n \telse if (s[d->i] == '\"')\n-\t\t\td->flag == 2;\n+\t\td->flag = 2;\n \tif (s[d->i] == '\\'' && d->flag == 0)\n \t\td->flag = 1;\n \twhile (s[d->i] && d->flag == 1)\n \t{\n@@ -98,104 +98,4 @@\n \t}\n \tremove_spaces(s);\n \treturn (s);\n }\n-/******************************************************************************/\n-/*                                                                            */\n-/*                                                        :::      ::::::::   */\n-/*   transform_dollar.c                                 :+:      :+:    :+:   */\n-/*                                                    +:+ +:+         +:+     */\n-/*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n-/*                                                +#+#+#+#+#+   +#+           */\n-/*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n-/*   Updated: 2023/11/24 15:18:53 by shhuang          ###   ########.fr       */\n-/*                                                                            */\n-/******************************************************************************/\n-\n-#include \"short_code.h\"\n-\n-void\tinit_transform_d(t_short_dollar *d)\n-{\n-\td->tmp = NULL;\n-\td->i = -1;\n-\td->env_len = 0;\n-\td->save = 0;\n-\td->save_pre = 0;\n-\td->size = 0;\n-\td->slash_count = 0;\n-\td->start = 0;\n-\td->flag = 0;\n-}\n-\n-int\tcreate_flags(char *s, t_short_dollar *d)\n-{\n-\td->tmp = NULL;\n-\tif (s[d->i] == '\\\\')\n-\t{\n-\t\twhile (s[d->i] == '\\\\')\n-\t\t{\n-\t\t\td->slash_count++;\n-\t\t\td->i++;\n-\t\t}\n-\t}\n-\telse\n-\t\td->slash_count = 0;\n-\t\tif(d->flag == 2 && s[d->i] == '\"')\n-\t\t\td->flag = 0;\n-\t\telse\n-\t\t\tif (s[d->i] == '\"')\n-\t\t\t\td->flag == 2;\n-\tif (s[d->i] == '\\'' && d->flag == 0)\n-\t\td->flag = 1;\n-\twhile (s[d->i] && d->flag == 1)\n-\t{\n-\t\td->i++;\n-\t\tif (s[d->i] == '\\'')\n-\t\t{\n-\t\t\td->flag = 0;\n-\t\t\tbreak;\n-\t\t}\n-\t}\n-\td->start = d->i;\n-\treturn (1);\n-}\n-\n-void remove_spaces(char *str) \n-{\n-    int length = ft_strlen(str);\n-    \n-    while (length > 0 && str[length - 1] == ' ')\n-        length--;\n-\n-    str[length] = '\\0';\n-}\n-\n-char\t*transform_for_dollar(char *s, t_data *data)\n-{\n-\tt_var\t\t\t*list;\n-\tt_short_dollar\td;\n-\n-\tinit_transform_d(&d);\n-\twhile (s[++d.i] != '\\0')\n-\t{\n-\t\td.size = 0;\n-\t\tif (create_flags(s, &d) && s[d.i] == '\\0')\n-\t\t\treturn (s);\n-\t\td.env_len = checksymbol(s + d.i + 1);\n-\t\tif (s[d.i] == '$' && d.slash_count % 2 == 0 && d.env_len)\n-\t\t{\n-\t\t\td.save = s[d.i + d.env_len + 1];\n-\t\t\ts[d.i + d.env_len + 1] = '\\0';\n-\t\t\tlist = search_variable_tvar(s + d.i, data);\n-\t\t\ts[d.i + d.env_len + 1] = (char)d.save;\n-\t\t\tif (list != NULL)\n-\t\t\t{\n-\t\t\t\td.tmp = add_slashes(ft_strdup(list->value));\n-\t\t\t\td.size = (int)ft_strlen(d.tmp);\n-\t\t\t}\n-\t\t\ts = replace_for_new_str(s, d.tmp, d.start, &d.i);\n-\t\t\td.i+=d.size;\n-\t\t}\n-\t}\n-\tremove_spaces(s);\n-\treturn (s);\n-}\n"
                }
            ],
            "date": 1700832225753,
            "name": "Commit-0",
            "content": "/******************************************************************************/\n/*                                                                            */\n/*                                                        :::      ::::::::   */\n/*   transform_dollar.c                                 :+:      :+:    :+:   */\n/*                                                    +:+ +:+         +:+     */\n/*   By: shhuang <dsheng1993@gmail.com>             +#+  +:+       +#+        */\n/*                                                +#+#+#+#+#+   +#+           */\n/*   Created: 2023/10/18 20:19:51 by shhuang           #+#    #+#             */\n/*   Updated: 2023/11/24 14:23:45 by shhuang          ###   ########.fr       */\n/*                                                                            */\n/******************************************************************************/\n\n#include \"short_code.h\"\n\nvoid\tinit_transform_d(t_short_dollar *d)\n{\n\td->tmp = NULL;\n\td->i = -1;\n\td->env_len = 0;\n\td->save = 0;\n\td->save_pre = 0;\n\td->size = 0;\n\td->slash_count = 0;\n\td->start = 0;\n\td->flag = 0;\n}\n\nint\tcreate_flags(char *s, t_short_dollar *d)\n{\n\td->tmp = NULL;\n\tif (s[d->i] == '\\\\')\n\t{\n\t\twhile (s[d->i] == '\\\\')\n\t\t{\n\t\t\td->slash_count++;\n\t\t\td->i++;\n\t\t}\n\t}\n\telse\n\t\td->slash_count = 0;\n\tif (s[d->i] == '\\'')\n\t\td->flag = 1;\n\twhile (s[d->i] && d->flag == 1)\n\t{\n\t\td->i++;\n\t\tif (s[d->i] == '\\'')\n\t\t\td->flag = 0;\n\t}\n\td->start = d->i;\n\treturn (1);\n}\n\nvoid remove_spaces(char *str) \n{\n    int length = ft_strlen(str);\n    \n    while (length > 0 && str[length - 1] == ' ')\n        length--;\n\n    str[length] = '\\0';\n}\n\nchar\t*transform_for_dollar(char *s, t_data *data)\n{\n\tt_var\t\t\t*list;\n\tt_short_dollar\td;\n\n\tinit_transform_d(&d);\n\twhile (s[++d.i] != '\\0')\n\t{\n\t\td.size = 0;\n\t\tif (create_flags(s, &d) && s[d.i] == '\\0')\n\t\t\treturn (s);\n\t\td.env_len = checksymbol(s + d.i + 1);\n\t\tif (s[d.i] == '$' && d.slash_count % 2 == 0 && d.env_len)\n\t\t{\n\t\t\td.save = s[d.i + d.env_len + 1];\n\t\t\ts[d.i + d.env_len + 1] = '\\0';\n\t\t\tlist = search_variable_tvar(s + d.i, data);\n\t\t\ts[d.i + d.env_len + 1] = (char)d.save;\n\t\t\tif (list != NULL)\n\t\t\t{\n\t\t\t\td.tmp = add_slashes(ft_strdup(list->value));\n\t\t\t\td.size = (int)ft_strlen(d.tmp);\n\t\t\t}\n\t\t\ts = replace_for_new_str(s, d.tmp, d.start, &d.i);\n\t\t\td.i+=d.size;\n\t\t}\n\t}\n\tremove_spaces(s);\n\treturn (s);\n}\n"
        }
    ]
}